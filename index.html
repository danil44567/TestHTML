<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-image: url("Background.jpeg");
      background-size: cover; /* чтобы изображение заполнило всю доступную область */
      background-position: center center; /* чтобы изображение было выровнено по центру */
    }

    .quiz-container {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      padding: 20px;
      max-width: 500px;
      width: 100%;
      text-align: center;
    }

    h1 {
      color: #333;
    }

    .question {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }

    .options {
      display: flex;
      flex-direction: column;
    }

    .option {
      margin: 10px;
      padding: 10px;
      background-color: #f0f0f0;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    }

    .option:hover {
      background-color: #ddd;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    .counter {
      font-size: 1rem;
      margin-top: 10px;
      color: #666;
    }

    .option.selected {
      color: #fff;
    }

    .option.correct {
      background-color: green;
      color: white;
      box-shadow: 0 2px 20px rgba(0, 255, 0, 1);
    }

    .option.incorrect {
      background-color: red;
      color: white;
      box-shadow: 0 2px 20px rgba(255, 0, 0, 1);
    }

    .restart-btn {
      background-color: #333;
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .restart-btn:hover {
      background-color: #555;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }

      to {
        opacity: 0;
        transform: translateY(20px);
        visibility: hidden;
      }
    }

    .fade-out {
      animation: fadeOut 0.5s forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
        visibility: hidden;
      }

      to {
        opacity: 1;
        transform: translateY(0);
        visibility: visible;
      }
    }

    .fade-in {
      animation: fadeIn 0.5s forwards;
    }

    .correct-answers {
      color: green;
      font-weight: bold;
    }

    .total-questions {
      color: green;
      font-weight: bold;
    }
  </style>
  <title>Genshin Test</title>
</head>

<body>
  <div class="quiz-container" id="quiz-container">
    <h1>Тест по ГЕНШИИИИИНУУУУ</h1>
    <p class="question"></p>
    <div class="options"></div>
    <p class="counter">Вопрос 1 из {totalQuestions}</p>
  </div>
  <script>
    // Ваши вопросы и варианты ответов
    const questions = [
      {
        question: "Какая нация представлена архонтом Мондштадта?",
        options: ["Лиюэй", "Сириус", "Ли Лу", "Ватерхайя"],
        correctIndex: 0
      },
      {
        question: "Как называется оружие, которое держит в руках Ксеонг Ли?",
        options: ["Ледяной Сокрушитель", "Свободный Ветер", "Меч Декрета", "Звезда Надежды"],
        correctIndex: 2
      },
      {
        question: "Как зовут лучницу из Лиюэя, которая пришла в Тейват в поисках своей сестры?",
        options: ["Мона", "Лумин", "Цзы Чинь", "Чжон Юнь"],
        correctIndex: 1
      },
      {
        question: "Какая элементарная магия была у архона Ватерхайи?",
        options: ["Электро", "Гео", "Гидро", "Дендро"],
        correctIndex: 2
      },
      {
        question: "Какое имя носит архон Шэнь Ху?",
        options: ["Анемо", "Виридиан", "Барбатос", "Тритон"],
        correctIndex: 2
      },
      {
        question: "Какой элемент у архона Живогора?",
        options: ["Анемо", "Гео", "Электро", "Пиро"],
        correctIndex: 3
      },
      {
        question: "Как зовут молодого рыцаря из Мондштадта, который мечтает стать настоящим героем?",
        options: ["Джин", "Дилюк", "Кэйа", "Альбедо"],
        correctIndex: 2
      },
      {
        question: "В каком городе находится Черный Лилийный Гостиничный Комплекс?",
        options: ["Лиюэй", "Снежная Сторона Южных Земель", "Тейват", "Мондштадт"],
        correctIndex: 1
      },
      {
        question: "Как называется артефактный набор, связанный с элементом Гео?",
        options: ["Бесконечный океан", "Грозовой Ястреб", "Пламенный Вихрь", "Архаичные часы"],
        correctIndex: 1
      },
      {
        question: "Какой персонаж из перечисленных является архонтом Лиюэя?",
        options: ["Цзы Чинь", "Люмин", "Мона", "Чжон Юнь"],
        correctIndex: 0
      }
      // ... добавьте другие вопросы по аналогии
    ];

    let currentQuestionIndex = 0;
    let correctAnswers = 0;
    let isCheckingAnswer = false;


    const quizContainer = document.querySelector("#quiz-container"); // Получаем контейнер один раз

    function loadQuestion(index) {
      const questionContainer = quizContainer.querySelector(".question");
      const optionsContainer = quizContainer.querySelector(".options");
      const feedbackElement = quizContainer.querySelector(".feedback");

      questionContainer.textContent = questions[index].question;
      optionsContainer.innerHTML = "";

      if (feedbackElement) {
        feedbackElement.remove();
      }

      questions[index].options.forEach((option, optionIndex) => {
        const optionElement = document.createElement("div");
        optionElement.classList.add("option", "fade-in");
        optionElement.textContent = option;
        optionElement.addEventListener("click", () => selectOption(optionElement, optionIndex));
        optionsContainer.appendChild(optionElement);
      });

      updateCounter(index);
    }

    window.addEventListener("DOMContentLoaded", initQuiz);

    function selectOption(optionElement, selectedIndex) {
      if (isCheckingAnswer) {
        return; // Блокируем дополнительный ввод во время проверки
      }

      isCheckingAnswer = true; // Устанавливаем флаг проверки
      const correctIndex = questions[currentQuestionIndex].correctIndex;

      const options = document.querySelectorAll(".option");
      options.forEach(option => option.classList.remove("selected"));

      if (selectedIndex === correctIndex) {
        options[selectedIndex].classList.add("correct");
        correctAnswers++;
      } else {
        options[selectedIndex].classList.add("incorrect");
      }

      options.forEach((option, index) => {
        if (index !== selectedIndex) {
          option.classList.remove("fade-in");
          option.classList.add("fade-out");
        }
      });

      setTimeout(() => {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
          loadQuestion(currentQuestionIndex);
        } else {
          showFinalScore();
        }
        isCheckingAnswer = false; // Снимаем флаг проверки после завершения
      }, 1000);
    }


    function updateCounter(index) {
      const counterElement = document.querySelector(".counter");
      counterElement.textContent = `Вопрос ${index + 1} из ${questions.length}`;
    }


    function initQuiz() {
      const quizContainer = document.querySelector("#quiz-container");
      quizContainer.innerHTML = `
    <h1>Тест по ГЕНШИИИИИНУУУУ</h1>
    <p class="question"></p>
    <div class="options"></div>
    <p class="counter">Вопрос 1 из ${questions.length}</p>
  `;

      currentQuestionIndex = 0;
      correctAnswers = 0;
      loadQuestion(currentQuestionIndex);
    }

    function showFinalScore() {
      const quizContainer = document.querySelector("#quiz-container");
      const resultsContainer = document.createElement("div");
      resultsContainer.classList.add("results-container");
      resultsContainer.innerHTML = `
<p>Тест завершен! Вы правильно ответили на <span class="correct-answers">${correctAnswers}</span> вопросов из <span class="total-questions">${questions.length}</span>.</p>
  <button class="restart-btn">Начать сначала</button>
`;
      const correctAnswersPercentage = (correctAnswers / questions.length) * 100;

      const correctAnswersElement = resultsContainer.querySelector(".correct-answers");

      correctAnswersElement.textContent = correctAnswers;

      if (correctAnswersPercentage >= 90) {
        correctAnswersElement.style.color = "green";
      } else if (correctAnswersPercentage >= 50) {
        correctAnswersElement.style.color = "orange";
      } else {
        correctAnswersElement.style.color = "red";
      }
      quizContainer.innerHTML = ""; // Очищаем контейнер
      quizContainer.appendChild(resultsContainer); // Добавляем результаты

      const restartButton = quizContainer.querySelector(".restart-btn");
      restartButton.addEventListener("click", initQuiz);
    }


  </script>
</body>

</html>